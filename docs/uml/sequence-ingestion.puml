@startuml ingestion
actor Operator
participant IngestionUI
participant IngestionController
participant PdfExtractor
participant Chunker
participant Embedder
participant VectorStoreAdapter
participant Logger

Operator -> IngestionUI: Register PDF
IngestionUI -> IngestionController: ingest(pdfPath, docId)
IngestionController -> PdfExtractor: extractText(pdfPath)
PdfExtractor --> IngestionController: rawText
IngestionController -> Chunker: split(rawText)
Chunker --> IngestionController: chunks
IngestionController -> Embedder: embed(chunks.text)
Embedder --> IngestionController: embeddings
IngestionController -> VectorStoreAdapter: upsert(docId, chunks+embeddings)
VectorStoreAdapter --> IngestionController: ack
IngestionController -> Logger: logIngestion(docId, "OK")
IngestionController --> IngestionUI: ingestionStatus
@enduml
